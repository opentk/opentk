<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">


<!-- Mirrored from www.opentk.com/doc/graphics/textures/loading by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 10 May 2016 13:48:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="../textures.html" />

<link rel="up" href="../textures.html" />

<link rel="next" href="2d.html" />

<link rel="shortcut icon" href="http://www.opentk.com/sites/all/favicon.ico" type="image/x-icon" />
    <title>Loading a texture from disk | OpenTK</title>
    <!--[if !lt IE 7]> <style type="text/css" media="all">@import "/files/css/0d190fbd13bda50135e2c474ba9cb190.css";</style>
 <![endif]-->
    <!--[if !IE]>--> <style type="text/css" media="all">@import "http://www.opentk.com/files/css/0d190fbd13bda50135e2c474ba9cb190.css";</style>
 <!--<![endif]-->
    <!--[if IE 7]><style type="text/css" media="all">@import "/sites/all/themes/community4/IE67.css";</style><![endif]-->
    </head>

<body class="not-front not-logged-in ntype-book main-sidebar">

    <div id="layer1">
    
        <div id="header-bg">

            <div id="header">
           
                                    <a href="../../../index.html"><img src="http://www.opentk.com/sites/all/themes/community3/images/community2_logo.jpg" alt="Home" id="logo" /></a>
                                
                <div id="bg-image"><img src="http://www.opentk.com/sites/all/themes/community2/images/bg-header2.png" width="100%" height="100%" /></div>

                
                                    <h2 class='siteSlogan'>Home of the Open Toolkit library</h2>
                
                
                                  <div class="primary-links-wrapper">
                    <ul class="primary-links" id="navtabs"><li  class="first menu-1-1-2"><a href="../../../index.html" title="Return to the OpenTK homepage." class="menu-1-1-2">Home</a></li>
<li  class="menu-1-2-2"><a href="http://www.opentk.com/project/opentk" title="Learn more or download OpenTK." class="menu-1-2-2">Project</a></li>
<li  class="menu-1-3-2"><a href="../../../doc.html" title="Read the OpenTK programming guide." class="menu-1-3-2">Documentation</a></li>
<li  class="menu-1-4-2"><a href="http://www.opentk.com/forum/2" title="Discuss OpenTK or ask for help." class="menu-1-4-2">Forum</a></li>
<li  class="menu-1-5-2"><a href="http://www.opentk.com/files/opentk-issues.html" title="View issue reports for OpenTK." class="menu-1-5-2">Issues</a></li>
<li  class="menu-1-6-2"><a href="http://www.opentk.com/blog" title="Read the blogs of OpenTK users." class="menu-1-6-2">Blogs</a></li>
<li  class="menu-1-7-2"><a href="http://www.opentk.com/project/all" title="Search the database of OpenTK projects." class="menu-1-7-2">Gallery</a></li>
<li  class="last menu-1-8-2"><a href="http://www.opentk.com/search" title="Quickly locate content on the site." class="menu-1-8-2">Search</a></li>
</ul>                  </div>
                
            </div>
            
        </div>

        <div id="page" class="clear-block">
            <div id="wrapper" class="clear-block">
                <div id="subwrapper">
                    <div id="container">
                        <div id="content">

                            
                            <div class="content-area">

                                                                    
                                <div class="tabs clear-block">
                                    <div class="breadcrumb"><a href="../../../index.html">Home</a> » <a href="../../../doc.html" title="What is this all about?">Introduction</a> » <a href="../../graphics.html" title="Description of the OpenTK.Graphics namespace, plus a quick OpenGL and OpenGL|ES primer.">Graphics</a> » <a href="../textures.html">Textures</a></div>                                </div>
                                
                                
                                
                                <div class="node-content-wrapper">

                                    				<div id="node-1412" class="node ntype-book clear-block">

	
			<h1 class="title"><a href="loading.html">Loading a texture from disk</a></h1>    
	
	

    <div class="content">
	    
        <p>Before going into technical details about textures in the graphics pipeline, it is useful to know how to actually <i>load</i> a texture into OpenGL.</p>
<p>A simple way to achieve this is to use the <span class="geshifilter"><code class="geshifilter-csharp"><span class="kw5">System</span>.<span class="me1">Drawing</span>.<span class="me1">Bitmap</span></code></span> class (<a href="http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx">MSDN documentation</a>). This class can decode BMP, GIF, EXIG, JPG, PNG and TIFF images into system memory, so the only thing we have to do is send the decoded data to OpenGL. Here is how:</p>
<div class="geshifilter">
<pre class="geshifilter-csharp"><span class="kw1">using</span> <span class="kw5">System</span>.<span class="me1">Drawing</span>;
<span class="kw1">using</span> <span class="kw5">System</span>.<span class="me1">Drawing</span>.<span class="me1">Imaging</span>;
<span class="kw1">using</span> <span class="kw5">OpenTK</span>.<span class="me1">Graphics</span>.<span class="me1">OpenGL</span>;
&nbsp;
<span class="kw1">static</span> <span class="kw1">int</span> LoadTexture<span class="br0">&#40;</span><span class="kw1">string</span> filename<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="kw4">String</span>.<span class="me1">IsNullOrEmpty</span><span class="br0">&#40;</span>filename<span class="br0">&#41;</span><span class="br0">&#41;</span>
        <span class="kw1">throw</span> <span class="kw1">new</span> ArgumentException<span class="br0">&#40;</span>filename<span class="br0">&#41;</span>;
&nbsp;
    <span class="kw1">int</span> id = <span class="kw3">GL</span>.<span class="me1">GenTexture</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw3">GL</span>.<span class="me1">BindTexture</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, id<span class="br0">&#41;</span>;
&nbsp;
    <span class="co1">// We will not upload mipmaps, so disable mipmapping (otherwise the texture will not appear).</span>
    <span class="co1">// We can use GL.GenerateMipmaps() or GL.Ext.GenerateMipmaps() to create</span>
    <span class="co1">// mipmaps automatically. In that case, use TextureMinFilter.LinearMipmapLinear to enable them.</span>
    <span class="kw3">GL</span>.<span class="me1">TexParameter</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, TextureParameterName.<span class="me1">TextureMinFilter</span>, <span class="br0">&#40;</span><span class="kw1">int</span><span class="br0">&#41;</span>TextureMinFilter.<span class="me1">Linear</span><span class="br0">&#41;</span>;
    <span class="kw3">GL</span>.<span class="me1">TexParameter</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, TextureParameterName.<span class="me1">TextureMagFilter</span>, <span class="br0">&#40;</span><span class="kw1">int</span><span class="br0">&#41;</span>TextureMagFilter.<span class="me1">Linear</span><span class="br0">&#41;</span>;
&nbsp;
    Bitmap bmp = <span class="kw1">new</span> Bitmap<span class="br0">&#40;</span>filename<span class="br0">&#41;</span>;
    BitmapData bmp_data = bmp.<span class="me1">LockBits</span><span class="br0">&#40;</span><span class="kw1">new</span> Rectangle<span class="br0">&#40;</span><span class="nu0">0</span>, <span class="nu0">0</span>, bmp.<span class="me1">Width</span>, bmp.<span class="me1">Height</span><span class="br0">&#41;</span>, ImageLockMode.<span class="me1">ReadOnly</span>, <span class="kw5">System</span>.<span class="me1">Drawing</span>.<span class="me1">Imaging</span>.<span class="me1">PixelFormat</span>.<span class="me1">Format32bppArgb</span><span class="br0">&#41;</span>;
&nbsp;
    <span class="kw3">GL</span>.<span class="me1">TexImage2D</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, <span class="nu0">0</span>, PixelInternalFormat.<span class="me1">Rgba</span>, bmp_data.<span class="me1">Width</span>, bmp_data.<span class="me1">Height</span>, <span class="nu0">0</span>,
        <span class="kw5">OpenTK</span>.<span class="me1">Graphics</span>.<span class="me1">OpenGL</span>.<span class="me1">PixelFormat</span>.<span class="me1">Bgra</span>, PixelType.<span class="me1">UnsignedByte</span>, bmp_data.<span class="me1">Scan0</span><span class="br0">&#41;</span>;
&nbsp;
    bmp.<span class="me1">UnlockBits</span><span class="br0">&#40;</span>bmp_data<span class="br0">&#41;</span>;
&nbsp;
    <span class="kw1">return</span> id;
<span class="br0">&#125;</span></pre></div>
<p>Now you can bind this texture id to a sampler (with <span class="geshifilter"><code class="geshifilter-csharp"><span class="kw3">GL</span>.<span class="me1">Uniform1</span></code></span>) and use it in your shaders. If you are not using shaders, you should enable texturing (with <span class="geshifilter"><code class="geshifilter-csharp"><span class="kw3">GL</span>.<span class="me1">Enable</span></code></span>) and bind the texture (<span class="geshifilter"><code class="geshifilter-csharp"><span class="kw3">GL</span>.<span class="me1">BindTexture</span></code></span>) prior to rendering.</p>
<div class="book-navigation"><div class="page-links clear-block"><a href="../textures.html" class="page-previous" title="Go to previous page">‹ Textures</a><a href="../textures.html" class="page-up" title="Go to parent page">up</a><a href="2d.html" class="page-next" title="Go to next page">2D Texture differences ›</a></div></div>
        <div class="clear-block"></div>
        
                    <div class="links">
                <ul class="links inline"><li  class="first book_printer"><a href="http://www.opentk.com/book/export/html/1412" title="Show a printer-friendly version of this book page and its sub-pages." class="book_printer">Printer-friendly version</a></li>
<li  class="last comment_forbidden"><span class="comment_forbidden"><a href="http://www.opentk.com/user/login?destination=node/1412%2523comment-form">Login</a> or <a href="http://www.opentk.com/user/register?destination=node/1412%2523comment-form">register</a> to post comments</span></li>
</ul>            </div>
            <br />
        
		
    </div> <!-- content -->

</div> <!-- /#node-1412 -->

<div id="comments" class="clear-block">
  <h2 class="comments">Comments</h2>
<form action="http://www.opentk.com/doc/graphics/textures/loading"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>
<div class="box">
            <h2>Comment viewing options</h2>
        <div class="content">
        <div class="container-inline"><input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10" selected="selected">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div>    </div>
</div>


</div></form>
<a id="comment-7535"></a>

<div class="comment-wrapper">
    <div class="comment">

        <div class="clear-block">
        <div class="header">
                        <div class="user-picture">
                <div class="picture"><img src="http://www.opentk.com/files/user_pictures/unknown.png" alt="iliak&#039;s picture" title="iliak&#039;s picture"  /></div>            </div>
                        <div class="comment-title">
            <h3><a href="loading.html#comment-7535" class="active">Re: Loading a texture from disk</a></h3>
            </div>
            <span class="submitted">
            Posted Tuesday, 24 November, 2009 - 10:12             by iliak                        </span>
        </div>
        </div>

        <div class="comment-odd">
        <p>You can have a look at my <a href="http://code.google.com/p/arcadeengine/source/browse/trunk/Framework/Graphic/Texture.cs">Texture</a> class. You can loads a texture from a file, a Stream or a byte[], resizes the texture, saves the texture to a disk and access texels.</p>
        </div>

        <div class="comment-footer">
                </div>
    </div>
</div>



<a id="comment-16350"></a>

<div class="comment-wrapper">
    <div class="comment">

        <div class="clear-block">
        <div class="header">
                        <div class="user-picture">
                <div class="picture"><img src="http://www.opentk.com/files/user_pictures/unknown.png" alt="ironic&#039;s picture" title="ironic&#039;s picture"  /></div>            </div>
                        <div class="comment-title">
            <h3><a href="loading.html#comment-16350" class="active">Re: Loading a texture from disk</a></h3>
            </div>
            <span class="submitted">
            Posted Monday, 24 November, 2014 - 13:11             by ironic                        </span>
        </div>
        </div>

        <div class="comment-even">
        <p>Does this example work if stride of BitmapData is not equal to width*4 ?</p>
        </div>

        <div class="comment-footer">
                </div>
    </div>
</div>



<a id="comment-16351"></a>

<div class="comment-wrapper">
    <div class="comment">

        <div class="clear-block">
        <div class="header">
                        <div class="user-picture">
                <div class="picture"><img src="http://www.opentk.com/files/user_pictures/picture-1.png" alt="the Fiddler&#039;s picture" title="the Fiddler&#039;s picture"  /></div>            </div>
                        <div class="comment-title">
            <h3><a href="loading.html#comment-16351" class="active">Re: Loading a texture from disk</a></h3>
            </div>
            <span class="submitted">
            Posted Monday, 24 November, 2014 - 15:06             by the Fiddler                        </span>
        </div>
        </div>

        <div class="comment-odd">
        <p>OpenGL pack alignment is 4 by default. You can modify this using <a href="../../../../www.opengl.org/sdk/docs/man/html/glPixelStore.xhtml">GL.PixelStore()</a>. Note that the GDI+ (System.Drawing) may impose additional alignment requirements, which are outside the scope of OpenTK/OpenGL. You should test both .Net and Mono to ensure your textures are being loaded correctly.</p>
        </div>

        <div class="comment-footer">
                </div>
    </div>
</div>



<a id="comment-16993"></a>

<div class="comment-wrapper">
    <div class="comment">

        <div class="clear-block">
        <div class="header">
                        <div class="user-picture">
                <div class="picture"><img src="http://www.opentk.com/files/user_pictures/unknown.png" alt="wcdeich4&#039;s picture" title="wcdeich4&#039;s picture"  /></div>            </div>
                        <div class="comment-title">
            <h3><a href="loading.html#comment-16993" class="active">Re: Loading a texture from disk</a></h3>
            </div>
            <span class="submitted">
            Posted Friday, 27 November, 2015 - 00:51             by wcdeich4                        </span>
        </div>
        </div>

        <div class="comment-even">
        <p>I have noticed how some people use <b>bmp.Dispose(); </b>  right after  bmp.UnlockBits(bmp_data);  </p>
<p>Is it safe to call  .Dispose() b/c there is another copy of the data passed into the unmanaged layer?  Or is it a bad practice?</p>
        </div>

        <div class="comment-footer">
                </div>
    </div>
</div>




</div> <!-- /#comments -->

                                    
                                </div>
                            </div>
                        </div>
                    </div>

                                            <div id="main_supplements">
                        
                            <div class="block-wrapper">

	<div id="block-block-1" class="block block-block">
				<div class="content">
					<div>
		<form action="http://www.opentk.com/user?destination=node%2F1412" method="post" id="user-login-form">
			<div class="form-item">
				<input type="text" value="Username" style="color: #777;" maxlength="60" name="name" id="edit-name" size="15" class="form-text required" onfocus="this.select()" />
			</div>
			<div class="form-item">
				<input type="password" value="Password" style="color: #777;" name="pass" id="edit-pass" size="15" class="form-text required" onfocus="this.select()" />
			</div>
                        <div class="form-item"><input type="submit" name="op" id="edit-submit" value="Log in" /></div>
			<div class="item-list">
				<ul>
					<li><a href="http://www.opentk.com/user/register" title="Create account">Create account</a></li>
					<li><a href="http://www.opentk.com/user/password" title="Reset password">Reset password</a></li>
				</ul>
				<input type="hidden" name="form_id" id="edit-user-login" value="user_login" />
			</div>
		</form>
	</div>
		</div>
	</div>

</div>

<div class="block-wrapper">

	<div id="block-blockcache-26" class="block block-blockcache">
					<h4 class="block-title">Commit log</h4>				<div class="content">
			<div class="item-list"><ul><li><a href="https://github.com/opentk/opentk/commit/2e51fe019771f4c70b15bb25b3a560f712a45fbf">Notice of leave</a>
</li><li><a href="https://github.com/opentk/opentk/commit/6ac1c63ff3a35367f78b500e06b2d3ca5bff3a69">Merge pull request #328 from WardBenjamin/develop</a>
</li><li><a href="https://github.com/opentk/opentk/commit/55bd3424179168eb886a853ba16633f65808320a">Fix documentation for NativeWindow.WindowBorder</a>
</li></ul></div><div class="more-link"><a href="http://www.opentk.com/aggregator/sources/1" title="View this feed&#039;s recent news.">more</a></div>		</div>
	</div>

</div>

                            
                        </div>
                                    </div>
		
            </div>
	    
	    
	</div>
	
    </div> <!-- #layer1 -->


    
        <div id="footer">

            
                            <div id="footer-layer">

<p><small>Site design by Stefanos A. Icons courtesy of <a href="http://www.gnome-look.org/content/show.php/GNOME-colors?content=82562">gnome-colors</a>.</small></p>

</div>
                    </div>

        
    
</body>


<!-- Mirrored from www.opentk.com/doc/graphics/textures/loading by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 10 May 2016 13:48:29 GMT -->
</html>
