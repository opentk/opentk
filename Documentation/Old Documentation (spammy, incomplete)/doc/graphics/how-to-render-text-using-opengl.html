<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">


<!-- Mirrored from www.opentk.com/doc/graphics/how-to-render-text-using-opengl by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 10 May 2016 13:48:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="prev" href="save-opengl-rendering-to-disk.html" />

<link rel="up" href="../graphics.html" />

<link rel="next" href="../audio.html" />

<link rel="shortcut icon" href="http://www.opentk.com/sites/all/favicon.ico" type="image/x-icon" />
    <title>How to render text using OpenGL | OpenTK</title>
    <!--[if !lt IE 7]> <style type="text/css" media="all">@import "/files/css/0d190fbd13bda50135e2c474ba9cb190.css";</style>
 <![endif]-->
    <!--[if !IE]>--> <style type="text/css" media="all">@import "http://www.opentk.com/files/css/0d190fbd13bda50135e2c474ba9cb190.css";</style>
 <!--<![endif]-->
    <!--[if IE 7]><style type="text/css" media="all">@import "/sites/all/themes/community4/IE67.css";</style><![endif]-->
    </head>

<body class="not-front not-logged-in ntype-book main-sidebar">

    <div id="layer1">
    
        <div id="header-bg">

            <div id="header">
           
                                    <a href="../../index.html"><img src="http://www.opentk.com/sites/all/themes/community3/images/community2_logo.jpg" alt="Home" id="logo" /></a>
                                
                <div id="bg-image"><img src="http://www.opentk.com/sites/all/themes/community2/images/bg-header2.png" width="100%" height="100%" /></div>

                
                                    <h2 class='siteSlogan'>Home of the Open Toolkit library</h2>
                
                
                                  <div class="primary-links-wrapper">
                    <ul class="primary-links" id="navtabs"><li  class="first menu-1-1-2"><a href="../../index.html" title="Return to the OpenTK homepage." class="menu-1-1-2">Home</a></li>
<li  class="menu-1-2-2"><a href="http://www.opentk.com/project/opentk" title="Learn more or download OpenTK." class="menu-1-2-2">Project</a></li>
<li  class="menu-1-3-2"><a href="../../doc.html" title="Read the OpenTK programming guide." class="menu-1-3-2">Documentation</a></li>
<li  class="menu-1-4-2"><a href="http://www.opentk.com/forum/2" title="Discuss OpenTK or ask for help." class="menu-1-4-2">Forum</a></li>
<li  class="menu-1-5-2"><a href="http://www.opentk.com/files/opentk-issues.html" title="View issue reports for OpenTK." class="menu-1-5-2">Issues</a></li>
<li  class="menu-1-6-2"><a href="http://www.opentk.com/blog" title="Read the blogs of OpenTK users." class="menu-1-6-2">Blogs</a></li>
<li  class="menu-1-7-2"><a href="http://www.opentk.com/project/all" title="Search the database of OpenTK projects." class="menu-1-7-2">Gallery</a></li>
<li  class="last menu-1-8-2"><a href="http://www.opentk.com/search" title="Quickly locate content on the site." class="menu-1-8-2">Search</a></li>
</ul>                  </div>
                
            </div>
            
        </div>

        <div id="page" class="clear-block">
            <div id="wrapper" class="clear-block">
                <div id="subwrapper">
                    <div id="container">
                        <div id="content">

                            
                            <div class="content-area">

                                                                    
                                <div class="tabs clear-block">
                                    <div class="breadcrumb"><a href="../../index.html">Home</a> » <a href="../../doc.html" title="What is this all about?">Introduction</a> » <a href="../graphics.html" title="Description of the OpenTK.Graphics namespace, plus a quick OpenGL and OpenGL|ES primer.">Graphics</a></div>                                </div>
                                
                                
                                
                                <div class="node-content-wrapper">

                                    				<div id="node-1555" class="node ntype-book clear-block">

	
			<h1 class="title"><a href="how-to-render-text-using-opengl.html">How to render text using OpenGL</a></h1>    
	
	

    <div class="content">
	    
        <p>The simplest way to render text with OpenGL is to use System.Drawing. This approach has three steps:</p>
<ol>
<li>Use <span class="geshifilter"><code class="geshifilter-csharp">Graphics.<span class="me1">DrawString</span><span class="br0">&#40;</span><span class="br0">&#41;</span></code></span> to render text to a <span class="geshifilter"><code class="geshifilter-csharp">Bitmap</code></span>.</li>
<li>Upload the <span class="geshifilter"><code class="geshifilter-csharp">Bitmap</code></span> to an OpenGL texture.</li>
<li>Render the OpenGL texture as a fullscreen quad.</li>
</ol>
<p>This approach is extremely efficient for text that changes infrequently, because only step 3 has to be performed every frame. Additionally, dynamic text can be reasonably efficient as long as care is taken to update only regions that are actually modified.</p>
<p>The downside of this approach is that (a) rendering is constrained by the capabilities of System.Drawing (i.e. poor support for complex scripts) and (b) it only supports 2d text. Moreover, care should be taken to recreate the Bitmap and OpenGL texture whenever the parent window changes size.</p>
<p>Sample code:</p>
<div class="geshifilter">
<pre class="geshifilter-csharp"><span class="kw1">using</span> <span class="kw5">System</span>.<span class="me1">Drawing</span>;
<span class="kw1">using</span> <span class="kw5">OpenTK</span>.<span class="me1">Graphics</span>.<span class="me1">OpenGL</span>;
&nbsp;
Bitmap text_bmp;
<span class="kw1">int</span> text_texture;
&nbsp;
window.<span class="me1">OnLoad</span> += <span class="br0">&#40;</span>sender, e<span class="br0">&#41;</span> =&gt;
<span class="br0">&#123;</span>
    <span class="co1">// Create Bitmap and OpenGL texture</span>
    text_bmp = <span class="kw1">new</span> Bitmap<span class="br0">&#40;</span>ClientSize.<span class="me1">Width</span>, ClientSize.<span class="me1">Height</span><span class="br0">&#41;</span>; <span class="co1">// match window size</span>
&nbsp;
    text_texture = <span class="kw3">GL</span>.<span class="me1">GenTexture</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw3">GL</span>.<span class="me1">BindTexture</span><span class="br0">&#40;</span>text_texture<span class="br0">&#41;</span>;
    <span class="kw3">GL</span>.<span class="me1">TexParameter</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, TextureParameterName.<span class="me1">TextureMagFilter</span>, <span class="br0">&#40;</span><span class="kw1">int</span><span class="br0">&#41;</span>All.<span class="me1">Linear</span><span class="br0">&#41;</span>;
    <span class="kw3">GL</span>.<span class="me1">TexParameter</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, TextureParameterName.<span class="me1">TextureMinFilter</span>, <span class="br0">&#40;</span><span class="kw1">int</span><span class="br0">&#41;</span>All.<span class="me1">Linear</span><span class="br0">&#41;</span>;
    <span class="kw3">GL</span>.<span class="me1">TexImage2D</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, <span class="nu0">0</span>, PixelInternalFormat.<span class="me1">Rgba</span>, text_bmp.<span class="me1">Width</span>, text_bmp.<span class="me1">Height</span>, <span class="nu0">0</span>,
        PixelFormat.<span class="me1">Bgra</span>, PixelType.<span class="me1">UnsignedByte</span>, <span class="kw4">IntPtr</span>.<span class="me1">Zero</span><span class="br0">&#41;</span>; <span class="co1">// just allocate memory, so we can update efficiently using TexSubImage2D</span>
<span class="br0">&#125;</span>;
&nbsp;
window.<span class="me1">Resize</span> += <span class="br0">&#40;</span>sender, e<span class="br0">&#41;</span> =&gt;
<span class="br0">&#123;</span>
    <span class="co1">// Ensure Bitmap and texture match window size</span>
    text_bmp.<span class="me1">Dispose</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    text_bmp = <span class="kw1">new</span> Bitmap<span class="br0">&#40;</span>ClientSize.<span class="me1">Width</span>, ClientSize.<span class="me1">Height</span><span class="br0">&#41;</span>;
&nbsp;
    <span class="kw3">GL</span>.<span class="me1">BindTexture</span><span class="br0">&#40;</span>text_texture<span class="br0">&#41;</span>;
    <span class="kw3">GL</span>.<span class="me1">TexSubImage2D</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, text_bmp.<span class="me1">Width</span>, text_bmp.<span class="me1">Height</span>,
        PixelFormat.<span class="me1">Bgra</span>, PixelType.<span class="me1">UnsignedByte</span>, <span class="kw4">IntPtr</span>.<span class="me1">Zero</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>;
&nbsp;
<span class="co1">// Render text using System.Drawing.</span>
<span class="co1">// Do this only when text changes.</span>
<span class="kw1">using</span> <span class="br0">&#40;</span>Graphics gfx = Graphics.<span class="me1">FromImage</span><span class="br0">&#40;</span>text_bmp<span class="br0">&#41;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    gfx.<span class="me1">Clear</span><span class="br0">&#40;</span>Color.<span class="me1">Transparent</span><span class="br0">&#41;</span>;
    gfx.<span class="me1">DrawString</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>; <span class="co1">// Draw as many strings as you need</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">// Upload the Bitmap to OpenGL.</span>
<span class="co1">// Do this only when text changes.</span>
BitmapData data = text_bmp.<span class="me1">LockBits</span><span class="br0">&#40;</span><span class="kw1">new</span> Rectangle<span class="br0">&#40;</span><span class="nu0">0</span>, <span class="nu0">0</span>, text_bmp.<span class="me1">Width</span>, text_bmp.<span class="me1">Height</span><span class="br0">&#41;</span>, ImageLockMode.<span class="me1">ReadOnly</span>, <span class="kw5">System</span>.<span class="me1">Drawing</span>.<span class="me1">Imaging</span>.<span class="me1">PixelFormat</span>.<span class="me1">Format32bppArgb</span><span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">TexImage2D</span><span class="br0">&#40;</span>TextureTarget.<span class="me1">Texture2D</span>, <span class="nu0">0</span>, PixelInternalFormat.<span class="me1">Rgba</span>, Width, Height, <span class="nu0">0</span>,
    PixelFormat.<span class="me1">Bgra</span>, PixelType.<span class="me1">UnsignedByte</span>, data.<span class="me1">Scan0</span><span class="br0">&#41;</span>; 
text_bmp.<span class="me1">UnlockBits</span><span class="br0">&#40;</span>data<span class="br0">&#41;</span>;
&nbsp;
<span class="co1">// Finally, render using a quad. </span>
<span class="co1">// Do this every frame.</span>
<span class="kw3">GL</span>.<span class="me1">MatrixMode</span><span class="br0">&#40;</span>MatrixMode.<span class="me1">Projection</span><span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">LoadIdentity</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">Ortho</span><span class="br0">&#40;</span><span class="nu0">0</span>, Width, Height, <span class="nu0">0</span>, <span class="nu0">-1</span>, <span class="nu0">1</span><span class="br0">&#41;</span>;
&nbsp;
<span class="kw3">GL</span>.<span class="me1">Enable</span><span class="br0">&#40;</span>EnableCap.<span class="me1">Texture2D</span><span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">Enable</span><span class="br0">&#40;</span>EnableCap.<span class="me1">Blend</span><span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">BlendFunc</span><span class="br0">&#40;</span>BlendingFactorSrc.<span class="me1">One</span>, BlendingFactorDst.<span class="me1">OneMinusSourceAlpha</span><span class="br0">&#41;</span>;
&nbsp;
<span class="kw3">GL</span>.<span class="me1">Begin</span><span class="br0">&#40;</span>BeginMode.<span class="me1">Quads</span><span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">TexCoord</span><span class="br0">&#40;</span>0f, 1f<span class="br0">&#41;</span>; <span class="kw3">GL</span>.<span class="me1">Vertex2</span><span class="br0">&#40;</span>0f, 0f<span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">TexCoord</span><span class="br0">&#40;</span>1f, 1f<span class="br0">&#41;</span>; <span class="kw3">GL</span>.<span class="me1">Vertex2</span><span class="br0">&#40;</span>1f, 0f<span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">TexCoord</span><span class="br0">&#40;</span>1f, 0f<span class="br0">&#41;</span>; <span class="kw3">GL</span>.<span class="me1">Vertex2</span><span class="br0">&#40;</span>1f, 1f<span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">TexCoord</span><span class="br0">&#40;</span>0f, 0f<span class="br0">&#41;</span>; <span class="kw3">GL</span>.<span class="me1">Vertex2</span><span class="br0">&#40;</span>0f, 1f<span class="br0">&#41;</span>;
<span class="kw3">GL</span>.<span class="me1">End</span><span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre></div>
<p>This method can be easily generalized to use a more powerful text rendering library, like <a href="http://www.mono-project.com/Pango:Beginners">Pango#</a>.</p>
<div class="book-navigation"><div class="page-links clear-block"><a href="save-opengl-rendering-to-disk.html" class="page-previous" title="Go to previous page">‹ How to save an OpenGL rendering to disk</a><a href="../graphics.html" class="page-up" title="Go to parent page">up</a><a href="../audio.html" class="page-next" title="Go to next page">Chapter 5: OpenTK.Audio (OpenAL) ›</a></div></div>
        <div class="clear-block"></div>
        
                    <div class="links">
                <ul class="links inline"><li  class="first book_printer"><a href="http://www.opentk.com/book/export/html/1555" title="Show a printer-friendly version of this book page and its sub-pages." class="book_printer">Printer-friendly version</a></li>
<li  class="last comment_forbidden"><span class="comment_forbidden"><a href="http://www.opentk.com/user/login?destination=node/1555%2523comment-form">Login</a> or <a href="http://www.opentk.com/user/register?destination=node/1555%2523comment-form">register</a> to post comments</span></li>
</ul>            </div>
            <br />
        
		
    </div> <!-- content -->

</div> <!-- /#node-1555 -->

<div id="comments" class="clear-block">
  <h2 class="comments">Comments</h2>
<form action="http://www.opentk.com/doc/graphics/how-to-render-text-using-opengl"  accept-charset="UTF-8" method="post" id="comment-controls">
<div>
<div class="box">
            <h2>Comment viewing options</h2>
        <div class="content">
        <div class="container-inline"><input type="hidden" name="form_id" id="edit-comment-controls" value="comment_controls"  />
<div class="form-item" id="edit-mode-wrapper">
 <select name="mode" class="form-select" id="edit-mode" ><option value="1">Flat list - collapsed</option><option value="2" selected="selected">Flat list - expanded</option><option value="3">Threaded list - collapsed</option><option value="4">Threaded list - expanded</option></select>
</div>
<div class="form-item" id="edit-order-wrapper">
 <select name="order" class="form-select" id="edit-order" ><option value="1">Date - newest first</option><option value="2" selected="selected">Date - oldest first</option></select>
</div>
<div class="form-item" id="edit-comments-per-page-wrapper">
 <select name="comments_per_page" class="form-select" id="edit-comments-per-page" ><option value="10" selected="selected">10 comments per page</option><option value="30">30 comments per page</option><option value="50">50 comments per page</option><option value="70">70 comments per page</option><option value="90">90 comments per page</option><option value="150">150 comments per page</option><option value="200">200 comments per page</option><option value="250">250 comments per page</option><option value="300">300 comments per page</option></select>
</div>
<input type="submit" name="op" id="edit-submit" value="Save settings"  class="form-submit" />
</div><div class="description">Select your preferred way to display the comments and click "Save settings" to activate your changes.</div>    </div>
</div>


</div></form>
<a id="comment-10624"></a>

<div class="comment-wrapper">
    <div class="comment">

        <div class="clear-block">
        <div class="header">
                        <div class="user-picture">
                <div class="picture"><img src="http://www.opentk.com/files/user_pictures/unknown.png" alt="David&#039;s picture" title="David&#039;s picture"  /></div>            </div>
                        <div class="comment-title">
            <h3><a href="how-to-render-text-using-opengl.html#comment-10624" class="active">Re: How to render text using OpenGL</a></h3>
            </div>
            <span class="submitted">
            Posted Saturday, 20 November, 2010 - 02:51             by David                        </span>
        </div>
        </div>

        <div class="comment-odd">
        <p>see <a href="http://www.opentk.com/node/1554?page=1" title="here">here</a> for a utility class to draw text, using the principle described above.</p>
        </div>

        <div class="comment-footer">
                </div>
    </div>
</div>




</div> <!-- /#comments -->

                                    
                                </div>
                            </div>
                        </div>
                    </div>

                                            <div id="main_supplements">
                        
                            <div class="block-wrapper">

	<div id="block-block-1" class="block block-block">
				<div class="content">
					<div>
		<form action="http://www.opentk.com/user?destination=node%2F1555" method="post" id="user-login-form">
			<div class="form-item">
				<input type="text" value="Username" style="color: #777;" maxlength="60" name="name" id="edit-name" size="15" class="form-text required" onfocus="this.select()" />
			</div>
			<div class="form-item">
				<input type="password" value="Password" style="color: #777;" name="pass" id="edit-pass" size="15" class="form-text required" onfocus="this.select()" />
			</div>
                        <div class="form-item"><input type="submit" name="op" id="edit-submit" value="Log in" /></div>
			<div class="item-list">
				<ul>
					<li><a href="http://www.opentk.com/user/register" title="Create account">Create account</a></li>
					<li><a href="http://www.opentk.com/user/password" title="Reset password">Reset password</a></li>
				</ul>
				<input type="hidden" name="form_id" id="edit-user-login" value="user_login" />
			</div>
		</form>
	</div>
		</div>
	</div>

</div>

<div class="block-wrapper">

	<div id="block-blockcache-26" class="block block-blockcache">
					<h4 class="block-title">Commit log</h4>				<div class="content">
			<div class="item-list"><ul><li><a href="https://github.com/opentk/opentk/commit/2e51fe019771f4c70b15bb25b3a560f712a45fbf">Notice of leave</a>
</li><li><a href="https://github.com/opentk/opentk/commit/6ac1c63ff3a35367f78b500e06b2d3ca5bff3a69">Merge pull request #328 from WardBenjamin/develop</a>
</li><li><a href="https://github.com/opentk/opentk/commit/55bd3424179168eb886a853ba16633f65808320a">Fix documentation for NativeWindow.WindowBorder</a>
</li></ul></div><div class="more-link"><a href="http://www.opentk.com/aggregator/sources/1" title="View this feed&#039;s recent news.">more</a></div>		</div>
	</div>

</div>

                            
                        </div>
                                    </div>
		
            </div>
	    
	    
	</div>
	
    </div> <!-- #layer1 -->


    
        <div id="footer">

            
                            <div id="footer-layer">

<p><small>Site design by Stefanos A. Icons courtesy of <a href="http://www.gnome-look.org/content/show.php/GNOME-colors?content=82562">gnome-colors</a>.</small></p>

</div>
                    </div>

        
    
</body>


<!-- Mirrored from www.opentk.com/doc/graphics/how-to-render-text-using-opengl by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 10 May 2016 13:48:34 GMT -->
</html>
